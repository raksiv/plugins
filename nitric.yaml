targets:
  - file:platform.yaml
name: complete-web-app
description: Full web application with CDN

services:
  api:
    properties:
      memory: 1024
      timeout: 60
    env:
      NODE_ENV: production
    container:
      docker:
        dockerfile: Dockerfile
        context: .
    dev:
      script: go run main.go

buckets:
  static:
    access:
      api:
        - read

  uploads:
    access:
      api:
        - read
        - write

entrypoints:
  web:
    properties:
      waf_enabled: true
      rate_limit_enabled: true
    routes:
      /:
        name: api
      /api/*:
        name: api